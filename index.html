<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>Canvas Drawing Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module" src="/src/main.js"></script>
  </head>

  <body class="bg-gray-100 min-h-screen flex flex-col">
    <!-- 헤더 -->
    <header class="flex items-center h-14 bg-white shadow px-4">
      <button id="sidebarToggle" class="p-2 rounded hover:bg-gray-100">
        <!-- 햄버거 -->
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2"
          viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>
      <h1 class="ml-3 font-bold">🎨 Web Drawing Tool</h1>
    </header>

    <div class="flex flex-1 overflow-hidden">
      <!-- ✅ 사이드바 -->
      <aside id="sidebar"
        class="fixed top-14 left-0 w-64 h-[calc(100%-56px)] bg-white border-r transform -translate-x-full transition-transform duration-300 z-20">
        <div class="p-4 space-y-4">
          <div>
            <label class="block text-sm font-medium mb-1">색상</label>
            <input type="color" id="colorPicker"
              class="w-12 h-12 border rounded" value="#000000"/>
          </div>

          <div>
            <label class="block text-sm font-medium mb-1">브러시 크기</label>
            <input type="range" id="brushSize" min="1" max="50" value="5"
              class="w-full"/>
          </div>

          <div>
            <label class="block text-sm font-medium mb-1">도구</label>
            <select id="toolSelect" class="w-full border rounded p-2">
              <option value="pen">펜</option>
              <option value="eraser">지우개</option>
              <option value="line">직선</option>
              <option value="rect">사각형</option>
              <option value="circle">원</option>
            </select>
          </div>

          <label class="flex items-center gap-2">
            <input type="checkbox" id="gridToggle" class="w-5 h-5" /> 모눈 종이
          </label>

          <div class="flex flex-wrap gap-2 pt-2">
            <button id="clearBtn"
              class="px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600">
              Clear
            </button>
            <button id="savePngBtn"
              class="px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
              Save PNG
            </button>
            <button id="saveJpgBtn"
              class="px-3 py-2 bg-green-500 text-white rounded hover:bg-green-600">
              Save JPG
            </button>
          </div>
        </div>
      </aside>

      <!-- ✅ 메인 영역 -->
      <main id="mainArea" class="flex-1 ml-0 transition-all duration-300">
        <canvas id="drawingCanvas" class="w-full h-full bg-white"></canvas>
      </main>
    </div>

    <!-- 오버레이 (모바일) -->
    <div id="overlay"
      class="fixed inset-0 bg-black/40 hidden z-10"></div>

    <script>
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("overlay");
      const toggleBtn = document.getElementById("sidebarToggle");
      const mainArea = document.getElementById("mainArea");

      function openSidebar() {
        sidebar.classList.remove("-translate-x-full");
        overlay.classList.remove("hidden");
        mainArea.classList.add("ml-64");
      }
      function closeSidebar() {
        sidebar.classList.add("-translate-x-full");
        overlay.classList.add("hidden");
        mainArea.classList.remove("ml-64");
      }

      toggleBtn.addEventListener("click", () => {
        if (sidebar.classList.contains("-translate-x-full")) {
          openSidebar();
        } else {
          closeSidebar();
        }
      });
      overlay.addEventListener("click", closeSidebar);
    </script>
  </body>
</html>
